# ๐จ ะะตัะตัะพะด ะฝะฐ react-avatar-edit

## โ ะงัะพ ัะดะตะปะฐะฝะพ:

### ะฃััะฐะฝะพะฒะปะตะฝะฐ ะฑะธะฑะปะธะพัะตะบะฐ `react-avatar-edit`

ะญัะพ ะณะพัะพะฒะพะต ะฟัะพัะตััะธะพะฝะฐะปัะฝะพะต ัะตัะตะฝะธะต ะดะปั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั ะฐะฒะฐัะฐัะพะฒ ั ะฟะพะปะฝัะผ ััะฝะบัะธะพะฝะฐะปะพะผ.

**ะฃััะฐะฝะพะฒะปะตะฝะพ:**
```bash
npm install react-avatar-edit
```

---

## ๐ฏ ะัะตะธะผััะตััะฒะฐ:

### ะะพ (ะบะฐััะพะผะฝะพะต ัะตัะตะฝะธะต):
```
โ ะกะปะพะถะฝัะน canvas ะบะพะด (~800 ัััะพะบ)
โ ะัะพะฑะปะตะผั ั ะบะพะผะฟะพะทะธัะธะฝะณะพะผ
โ ะััะฝะฐั ะพะฑัะฐะฑะพัะบะฐ drag & drop
โ ะััะฝะฐั ะพะฑัะฐะฑะพัะบะฐ zoom
โ ะัะพะฑะปะตะผั ั ะพัะพะฑัะฐะถะตะฝะธะตะผ
```

### ะะพัะปะต (react-avatar-edit):
```
โ ะะพัะพะฒัะน UI (~200 ัััะพะบ)
โ ะัะพัะตััะธะพะฝะฐะปัะฝัะน ัะตะดะฐะบัะพั
โ ะัััะพะตะฝะฝัะน drag & drop
โ ะัััะพะตะฝะฝัะน zoom/crop
โ ะกัะฐะฑะธะปัะฝะฐั ัะฐะฑะพัะฐ
โ ะััะณะปัะน ะฐะฒะฐัะฐั ะฟะพ ัะผะพะปัะฐะฝะธั
โ ะะตั ะฟัะพะฑะปะตะผ ั canvas
```

---

## ๐จ ะะพะทะผะพะถะฝะพััะธ:

### ะคัะฝะบัะธะพะฝะฐะป ะฑะธะฑะปะธะพัะตะบะธ:

1. **Drag & Drop**
   - ะะตัะตัะฐัะบะธะฒะฐะฝะธะต ัะฐะนะปะฐ ะฒ ะทะพะฝั
   - ะะปะธ ะบะปะธะบ ะดะปั ะฒัะฑะพัะฐ

2. **Zoom & Crop**
   - ะะพะปััะธะบะพ ะผััะธ ะดะปั ะทัะผะฐ
   - Drag ะธะทะพะฑัะฐะถะตะฝะธั ะดะปั ะฟะพะทะธัะธะพะฝะธัะพะฒะฐะฝะธั
   - ะะฒัะพะผะฐัะธัะตัะบะฐั ะบััะณะปะฐั ะพะฑัะตะทะบะฐ

3. **Preview**
   - ะะธะฒะพะน ะฟัะตะดะฟัะพัะผะพัั
   - Base64 ัะตะทัะปััะฐั
   - ะะพัะพะฒ ะบ ะทะฐะณััะทะบะต

4. **ะะฐะปะธะดะฐัะธั**
   - ะะฐะทะผะตั ัะฐะนะปะฐ
   - ะขะธะฟ ัะฐะนะปะฐ
   - onBeforeFileLoad callback

---

## ๐ ะะฐะบ ัะฐะฑะพัะฐะตั:

### ะะพะผะฟะพะฝะตะฝั AvatarUploader:

```typescript
import AvatarEditor from 'react-avatar-edit';

// Callbacks:
const onCrop = (preview: string) => {
  // preview = base64 ะธะทะพะฑัะฐะถะตะฝะธะต
  setCroppedImage(preview);
};

const onClose = () => {
  // ะะพะปัะทะพะฒะฐัะตะปั ัะดะฐะปะธะป ะธะทะพะฑัะฐะถะตะฝะธะต
  setCroppedImage(null);
};

const onBeforeFileLoad = (elem) => {
  // ะะฐะปะธะดะฐัะธั ะฟะตัะตะด ะทะฐะณััะทะบะพะน
  if (elem.target.files[0].size > 10MB) {
    alert('Too big!');
    elem.target.value = '';
  }
};

// ะัะฟะพะปัะทะพะฒะฐะฝะธะต:
<AvatarEditor
  width={390}
  height={390}
  onCrop={onCrop}
  onClose={onClose}
  onBeforeFileLoad={onBeforeFileLoad}
  label="ะัะฑะตัะธัะต ะธะทะพะฑัะฐะถะตะฝะธะต"
/>
```

### Workflow:

```
1. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "ะะทะผะตะฝะธัั ะฐะฒะฐัะฐั"
   โ
2. ะัะบััะฒะฐะตััั ัะตะดะฐะบัะพั (AvatarEditor)
   โ
3. ะะพะปัะทะพะฒะฐัะตะปั ะฒัะฑะธัะฐะตั ัะพัะพ
   โ
4. Drag & Zoom ะดะปั ะฝะฐัััะพะนะบะธ
   โ
5. onCrop() ะฒัะทัะฒะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ
   โ
6. ะะพะบะฐะทัะฒะฐะตััั preview
   โ
7. ะะฐะถะธะผะฐะตั "ะกะพััะฐะฝะธัั"
   โ
8. base64 โ blob โ Supabase Storage
   โ
9. ะะพัะพะฒะพ!
```

---

## ๐ฆ ะกัััะบัััะฐ ะบะพะผะฟะพะฝะตะฝัะฐ:

### ะะฒะฐ ัะตะถะธะผะฐ:

#### 1. View Mode (ะฟะพ ัะผะพะปัะฐะฝะธั):
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ค ะขะตะบััะธะน ะฐะฒะฐัะฐั      โ
โ                         โ
โ  ะะฐะณััะทะธัั ะฐะฒะฐัะฐั       โ
โ  ะะธะฝะธะผัะผ 256ร256px      โ
โ                         โ
โ  [ะะทะผะตะฝะธัั] [๐๏ธ ะฃะดะฐะปะธัั]โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### 2. Editor Mode:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะฐัััะพะนะบะฐ ะฐะฒะฐัะฐัะฐ  [X] โ
โ                         โ
โ  โโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ                   โ  โ
โ  โ  AvatarEditor     โ  โ
โ  โ  - Drag & Drop    โ  โ
โ  โ  - Zoom (wheel)   โ  โ
โ  โ  - Crop (circle)  โ  โ
โ  โ                   โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโ  โ
โ                         โ
โ  ะัะตะดะฟัะพัะผะพัั:          โ
โ       ๐ค                โ
โ                         โ
โ  [โ ะกะพััะฐะฝะธัั] [ะัะผะตะฝะฐ]โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐จ ะกัะธะปะธะทะฐัะธั:

### ะะฐััะพะผะธะทะฐัะธั:

```typescript
<AvatarEditor
  labelStyle={{
    fontSize: '14px',
    fontWeight: '500',
    color: 'hsl(var(--foreground))',
    cursor: 'pointer',
    padding: '12px 24px',
    borderRadius: '8px',
    border: '2px dashed hsl(var(--border))',
    display: 'inline-block',
    transition: 'all 0.2s',
  }}
  borderStyle={{
    border: '2px solid hsl(var(--primary))',
    borderRadius: '50%', // ะััะณะปะฐั ัะฐะผะบะฐ
  }}
/>
```

**ะะฝัะตะณัะฐัะธั ั ัะตะผะพะน:**
- ะัะฟะพะปัะทัะตั CSS ะฟะตัะตะผะตะฝะฝัะต ัะตะผั
- `hsl(var(--foreground))` - ัะฒะตั ัะตะบััะฐ
- `hsl(var(--primary))` - ะพัะฝะพะฒะฝะพะน ัะฒะตั
- `hsl(var(--border))` - ัะฒะตั ะณัะฐะฝะธั

---

## ๐พ ะะฐะณััะทะบะฐ ะฒ Supabase:

### ะะพะฝะฒะตััะฐัะธั base64 โ blob:

```typescript
const base64ToBlob = (base64: string): Blob => {
  const byteString = atob(base64.split(',')[1]);
  const mimeString = base64.split(',')[0].split(':')[1].split(';')[0];
  const ab = new ArrayBuffer(byteString.length);
  const ia = new Uint8Array(ab);
  
  for (let i = 0; i < byteString.length; i++) {
    ia[i] = byteString.charCodeAt(i);
  }
  
  return new Blob([ab], { type: mimeString });
};
```

### ะะฐะณััะทะบะฐ:

```typescript
const blob = base64ToBlob(croppedImage);

await supabase.storage
  .from('avatars')
  .upload(filePath, blob, {
    contentType: 'image/jpeg',
    upsert: false,
  });
```

---

## ๐ ะะตัะตะฒะพะดั:

### ะะพะฒัะต ะบะปััะธ:

```typescript
avatar: {
  // ... ัััะตััะฒัััะธะต ...
  selectImage: 'ะัะฑะตัะธัะต ะธะทะพะฑัะฐะถะตะฝะธะต',
  preview: 'ะัะตะดะฟัะพัะผะพัั',
  change: 'ะะทะผะตะฝะธัั ะฐะฒะฐัะฐั',
  noCroppedImage: 'ะะพะถะฐะปัะนััะฐ, ะฒัะฑะตัะธัะต ะธ ะฝะฐัััะพะนัะต ะธะทะพะฑัะฐะถะตะฝะธะต',
}
```

**ะฏะทัะบะธ:**
- ๐ฌ๐ง English
- ๐บ๐ฆ ะฃะบัะฐัะฝััะบะฐ
- ๐ท๐บ ะัััะบะธะน
- ๐ต๐ฑ Polski

---

## ๐ ะกัะฐะฒะฝะตะฝะธะต:

| ะะฐัะฐะผะตัั | ะะฐััะพะผ | react-avatar-edit |
|----------|--------|-------------------|
| ะกััะพะบ ะบะพะดะฐ | ~800 | ~200 |
| Canvas ะฟัะพะฑะปะตะผั | โ ะะฐ | โ ะะตั |
| Drag & Drop | โ๏ธ ะััะฝะฐั | โ ะัััะพะตะฝะฝะฐั |
| Zoom | โ๏ธ ะััะฝะพะน | โ ะัััะพะตะฝะฝัะน |
| Crop | โ๏ธ ะััะฝะฐั | โ ะะฒัะพะผะฐัะธัะตัะบะฐั |
| ะะพะดะดะตัะถะบะฐ | โ ะะตั | โ npm |
| ะะฑะฝะพะฒะปะตะฝะธั | โ ะะตั | โ ะะตะณัะปััะฝัะต |
| ะะฐะณะธ | โ ะะฝะพะณะพ | โ ะะฐะปะพ |

---

## โ ะัะพะฒะตัะพัะฝัะน ัะฟะธัะพะบ:

### ะะพัะปะต ะพะฑะฝะพะฒะปะตะฝะธั ัััะฐะฝะธัั:

- [ ] ะะธะดะฝะฐ ะบะฝะพะฟะบะฐ "ะะทะผะตะฝะธัั ะฐะฒะฐัะฐั"
- [ ] ะะฐะถะฐัะธะต ะพัะบััะฒะฐะตั ัะตะดะฐะบัะพั
- [ ] ะะพะถะฝะพ ะฒัะฑัะฐัั ัะฐะนะป
- [ ] ะะพะถะฝะพ drag & drop ัะฐะนะป
- [ ] ะะพะถะฝะพ ะทัะผะธัั (ะบะพะปััะธะบะพ ะผััะธ)
- [ ] ะะพะถะฝะพ ะดะฒะธะณะฐัั ะธะทะพะฑัะฐะถะตะฝะธะต
- [ ] ะะพะบะฐะทัะฒะฐะตััั ะบััะณะปัะน ะฟัะตะดะฟัะพัะผะพัั
- [ ] ะะฝะพะฟะบะฐ "ะกะพััะฐะฝะธัั" ะฐะบัะธะฒะฝะฐ
- [ ] ะกะพััะฐะฝะตะฝะธะต ัะฐะฑะพัะฐะตั
- [ ] ะะฒะฐัะฐั ะพะฑะฝะพะฒะปัะตััั

---

## ๐ง ะะฐัััะพะนะบะธ ะฑะธะฑะปะธะพัะตะบะธ:

### ะะพัััะฟะฝัะต props:

```typescript
interface AvatarEditorProps {
  width: number;           // ะจะธัะธะฝะฐ ัะตะดะฐะบัะพัะฐ
  height: number;          // ะััะพัะฐ ัะตะดะฐะบัะพัะฐ
  onCrop: (preview: string) => void;  // Callback ั base64
  onClose: () => void;     // Callback ะฟัะธ ัะดะฐะปะตะฝะธะธ
  onBeforeFileLoad?: (e: ChangeEvent<HTMLInputElement>) => void;
  src?: string;            // ะะฐัะฐะปัะฝะพะต ะธะทะพะฑัะฐะถะตะฝะธะต
  label?: string;          // ะขะตะบัั ะบะฝะพะฟะบะธ ะฒัะฑะพัะฐ
  labelStyle?: CSSProperties;  // ะกัะธะปะธ ะบะฝะพะฟะบะธ
  borderStyle?: CSSProperties; // ะกัะธะปะธ ัะฐะผะบะธ
  shadingColor?: string;   // ะฆะฒะตั ะทะฐัะตะผะฝะตะฝะธั
  backgroundColor?: string; // ะฆะฒะตั ัะพะฝะฐ
  shadingOpacity?: number; // ะัะพะทัะฐัะฝะพััั ะทะฐัะตะผะฝะตะฝะธั
  mimeTypes?: string;      // ะะฐะทัะตััะฝะฝัะต ัะธะฟั
  closeIconColor?: string; // ะฆะฒะตั ะธะบะพะฝะบะธ ะทะฐะบัััะธั
  lineWidth?: number;      // ะขะพะปัะธะฝะฐ ะปะธะฝะธะธ
  minCropRadius?: number;  // ะะธะฝะธะผะฐะปัะฝัะน ัะฐะดะธัั
  cropRadius?: number;     // ะะฐัะฐะปัะฝัะน ัะฐะดะธัั
  cropColor?: string;      // ะฆะฒะตั crop ะปะธะฝะธะธ
  imageWidth?: number;     // ะจะธัะธะฝะฐ ะธะทะพะฑัะฐะถะตะฝะธั
}
```

### ะะฐัะธ ะฝะฐัััะพะนะบะธ:

```typescript
<AvatarEditor
  width={390}
  height={390}
  // ะััะณะปะฐั ะพะฑัะตะทะบะฐ ะฟะพ ัะผะพะปัะฐะฝะธั
  // ะะฐัะตะผะฝะตะฝะธะต ะฒะพะบััะณ ะฟะพ ัะผะพะปัะฐะฝะธั
  // Drag & Zoom ะฒัััะพะตะฝั
/>
```

---

## ๐ ะะพัะพะฒะพ!

### ะงัะพ ัะฐะฑะพัะฐะตั:

- โ ะัะพัะตััะธะพะฝะฐะปัะฝัะน ัะตะดะฐะบัะพั
- โ Drag & Drop
- โ Zoom ะบะพะปััะธะบะพะผ
- โ ะััะณะปะฐั ะพะฑัะตะทะบะฐ
- โ ะัะตะดะฟัะพัะผะพัั
- โ ะะฐะปะธะดะฐัะธั
- โ ะะฐะณััะทะบะฐ ะฒ Supabase
- โ 4 ัะทัะบะฐ
- โ ะฃะดะฐะปะตะฝะธะต ะฐะฒะฐัะฐัะฐ

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต:

1. ะัะบัะพะนัะต ะฟัะพัะธะปั
2. ะะฐะถะผะธัะต "ะะทะผะตะฝะธัั ะฐะฒะฐัะฐั"
3. ะัะฑะตัะธัะต ะธะปะธ ะฟะตัะตัะฐัะธัะต ัะพัะพ
4. ะะฐัััะพะนัะต zoom ะธ ะฟะพะทะธัะธั
5. ะัะพะฒะตัััะต ะฟัะตะดะฟัะพัะผะพัั
6. ะกะพััะฐะฝะธัะต!

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั ะฑะธะฑะปะธะพัะตะบะธ:

**NPM:** https://www.npmjs.com/package/react-avatar-edit

**GitHub:** https://github.com/kirill3333/react-avatar

**Demo:** https://kirill3333.github.io/react-avatar

---

## ๐ ะขะตัะฝะธัะตัะบะฐั ะธะฝัะพัะผะฐัะธั:

### ะะฐะฒะธัะธะผะพััะธ:

```json
{
  "react-avatar-edit": "^1.2.0"
}
```

### ะฃะดะฐะปะตะฝะพ:

- `src/utils/storageSetup.ts` - ะฑะพะปััะต ะฝะต ะฝัะถะตะฝ
- ะะตัั ะบะฐััะพะผะฝัะน canvas ะบะพะด
- ะััะฝัะต ะพะฑัะฐะฑะพััะธะบะธ drag/zoom/crop

### ะะพะฑะฐะฒะปะตะฝะพ:

- ะะผะฟะพัั `react-avatar-edit`
- ะคัะฝะบัะธั `base64ToBlob()`
- ะะพะฒัะต ะฟะตัะตะฒะพะดั
- ะฃะฟัะพััะฝะฝะฐั ะปะพะณะธะบะฐ

---

**ะกัะฐััั:** โ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั  
**ะะฐะทะผะตั:** -600 ัััะพะบ ะบะพะดะฐ  
**ะกัะฐะฑะธะปัะฝะพััั:** โฌ๏ธ ะะฝะฐัะธัะตะปัะฝะพ ะฒััะต  
**ะะพะดะดะตัะถะบะฐ:** โ npm ะฑะธะฑะปะธะพัะตะบะฐ

